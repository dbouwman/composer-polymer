<!-- <link rel="import" href="../../bower_components/polymer/polymer.html"> -->
<link rel="import" href="../../bower_components/core-icons/core-icons.html">
<link rel="import" href="../../bower_components/core-icon/core-icon.html">
<link rel="import" href="../../bower_components/core-field/core-field.html">
<link rel="import" href="../../bower_components/core-ajax/core-ajax.html">

<!-- 
  TODO:
    scripts in separate files
    where do results link to / events for loading locally...???
    should the url not have /datasets??
    change element prefixes from composer to esri_od???
    namespace custom events (esri_od?)
    look at styling it from outside
    need to share the url among the components??? - https://www.polymer-project.org/docs/polymer/polymer.html#global

    dataset-details element - composed of several smaller elements
    autocomplete
    map results element
    
    stuff search results into localstorage?
    byot (bring your own template) for result items
    write a story for this... (search agol items?)
 -->

<polymer-element name="composer-search" attributes="url, per_page, autofocus, placeholder, results">

  <template>
    <link rel="stylesheet" href="composer-search.css">

    <form action="{{url}}" 
          autocomplete="off" 
          on-submit="{{onSubmit}}">
      <div class="search-container">
        <core-field>
          <core-icon icon="search"></core-icon>
          <input 
            type="search" 
            autocomplete="off" 
            autofocus?="{{autofocus}}" 
            id="search" 
            name="search" 
            placeholder="{{placeholder}}" 
            value="{{searchString}}">
        </core-field>
        <core-ajax
          id="ajax"
          name="ajax"
          url="{{url}}?q={{searchString}}&per_page={{per_page}}"
          handleAs="json"
          response="{{results}}"></core-ajax>
      </div>
    </form>
  </template>

  <script src="composer-search.js"></script>

</polymer-element>
